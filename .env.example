# Voice & Video Features - Environment Configuration Template

## BACKEND (.env file)

# ============================================================================
# REQUIRED FOR VOICE FEATURES
# ============================================================================

# OpenAI API Key (required for voice transcription via Whisper)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================================================
# REQUIRED FOR VIDEO FEATURES
# ============================================================================

# Enable/disable video chat feature
VIDEO_CHAT_ENABLED=true

# ============================================================================
# DATABASE (required)
# ============================================================================

# Development (SQLite)
DATABASE_URL=sqlite:///./helios.db

# Production (PostgreSQL - recommended)
# DATABASE_URL=postgresql://user:password@localhost:5432/helios

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed origins for frontend
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# For production:
# CORS_ORIGINS=["https://yourdomain.com", "https://api.yourdomain.com"]

# ============================================================================
# OPTIONAL: LOGGING
# ============================================================================

# Log level for voice/video features
VOICE_VIDEO_LOG_LEVEL=INFO

# Enable debug logging for voice/video
ENABLE_VOICE_VIDEO_DEBUG=false

# ============================================================================
# OPTIONAL: RATE LIMITING
# ============================================================================

# Rate limit for voice transcription (per minute)
VOICE_RATE_LIMIT_PER_MINUTE=60

# Rate limit for voice transcription (per hour)
VOICE_RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# OPTIONAL: ADVANCED FEATURES
# ============================================================================

# Enable real-time transcription (future feature)
ENABLE_REAL_TIME_TRANSCRIPTION=false

# Enable video analysis (future feature)
ENABLE_VIDEO_ANALYSIS=false

# ============================================================================
# API CONFIGURATION
# ============================================================================

# API title and version
API_TITLE=Helios AI
API_VERSION=1.0.0

# Environment (development/staging/production)
ENVIRONMENT=development

# Debug mode
DEBUG=true

# ============================================================================
# ANTHROPIC & GOOGLE LLM
# ============================================================================

# Anthropic Claude API
ANTHROPIC_API_KEY=your-key-here

# Google Gemini API (optional)
GOOGLE_API_KEY=your-key-here


---

## FRONTEND (.env.local file)

# ============================================================================
# REQUIRED API CONFIGURATION
# ============================================================================

# Backend API URL
NEXT_PUBLIC_API_URL=http://localhost:8000

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable voice recording feature
NEXT_PUBLIC_ENABLE_VOICE=true

# Enable video chat feature
NEXT_PUBLIC_ENABLE_VIDEO=true

# ============================================================================
# OPTIONAL: FEATURE CONFIGURATION
# ============================================================================

# Maximum audio file size (MB)
NEXT_PUBLIC_MAX_AUDIO_SIZE_MB=25

# Video frame rate (FPS)
NEXT_PUBLIC_VIDEO_FPS=1

# Video resolution width
NEXT_PUBLIC_VIDEO_WIDTH=1280

# Video resolution height
NEXT_PUBLIC_VIDEO_HEIGHT=720

# ============================================================================
# OPTIONAL: ANALYTICS & MONITORING
# ============================================================================

# Enable analytics
NEXT_PUBLIC_ANALYTICS_ENABLED=false

# Analytics endpoint (if enabled)
NEXT_PUBLIC_ANALYTICS_URL=https://analytics.yourdomain.com

---

## PRODUCTION DEPLOYMENT CHECKLIST

### Backend Environment Variables (.env in production)

```bash
# CRITICAL - Must be set
OPENAI_API_KEY=sk-prod-key-here
ANTHROPIC_API_KEY=sk-prod-key-here
DATABASE_URL=postgresql://user:password@prod-db.com:5432/helios

# SECURITY
CORS_ORIGINS=["https://yourdomain.com", "https://app.yourdomain.com"]
DEBUG=false
ENVIRONMENT=production

# OPTIONAL but RECOMMENDED
VOICE_VIDEO_LOG_LEVEL=INFO
ENABLE_VOICE_VIDEO_DEBUG=false
VOICE_RATE_LIMIT_PER_MINUTE=60
VOICE_RATE_LIMIT_PER_HOUR=1000
```

### Frontend Environment Variables (.env.production in Vercel)

```bash
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_ENABLE_VOICE=true
NEXT_PUBLIC_ENABLE_VIDEO=true
NEXT_PUBLIC_ANALYTICS_ENABLED=true
NEXT_PUBLIC_ANALYTICS_URL=https://analytics.yourdomain.com
```

---

## Quick Setup Commands

### Backend
```bash
# Copy template and edit
cp .env.example .env
# Edit .env and add OPENAI_API_KEY

# Install dependencies
pip install -r requirements.txt

# Run with environment
python -m uvicorn api.main:app --reload
```

### Frontend
```bash
# Copy template and edit
cp .env.example .env.local
# Edit .env.local and set NEXT_PUBLIC_API_URL

# Install dependencies
npm install

# Run development server
npm run dev
```

---

## Environment Variables Summary

| Variable | Backend | Frontend | Required | Default |
|----------|---------|----------|----------|---------|
| OPENAI_API_KEY | ✅ | - | YES | - |
| DATABASE_URL | ✅ | - | YES | sqlite:// |
| ANTHROPIC_API_KEY | ✅ | - | NO | - |
| NEXT_PUBLIC_API_URL | - | ✅ | YES | http://localhost:8000 |
| CORS_ORIGINS | ✅ | - | YES | localhost |
| VIDEO_CHAT_ENABLED | ✅ | - | NO | true |
| NEXT_PUBLIC_ENABLE_VOICE | - | ✅ | NO | true |
| NEXT_PUBLIC_ENABLE_VIDEO | - | ✅ | NO | true |
| DEBUG | ✅ | - | NO | false |
| ENVIRONMENT | ✅ | - | NO | development |
| VOICE_VIDEO_LOG_LEVEL | ✅ | - | NO | INFO |
| ENABLE_VOICE_VIDEO_DEBUG | ✅ | - | NO | false |

---

## Security Best Practices

1. **Never commit `.env` files to version control**
   - Add to `.gitignore`
   - Use `.env.example` as template

2. **Use strong API keys**
   - Generate new keys for each environment
   - Rotate regularly
   - Use service-specific keys when possible

3. **Production deployment**
   - Use proper secret management (GitHub Secrets, Railway Secrets, etc.)
   - Never hardcode API keys
   - Use environment-specific URLs
   - Enable HTTPS
   - Enable CORS properly

4. **Development**
   - Use dummy API keys for testing
   - Keep credentials in local `.env` only
   - Use different API keys for each developer if possible

---

## Troubleshooting Environment Setup

### OpenAI API Key Issues
```bash
# Test if API key works
curl -X POST https://api.openai.com/v1/audio/transcriptions \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -F "file=@test.mp3" \
  -F "model=whisper-1"
```

### CORS Issues
- Check CORS_ORIGINS includes your frontend URL
- Ensure trailing slashes match exactly
- For production, use full domain without trailing slash

### Database Connection Issues
```bash
# Test PostgreSQL connection
psql postgresql://user:password@host:5432/helios
```

### WebSocket Connection Issues
- Check backend is running
- Ensure WebSocket protocol matches (ws:// vs wss://)
- Verify CORS allows WebSocket upgrades
- Check firewall isn't blocking port 8000

---

## References

- OpenAI API: https://platform.openai.com/docs/api-reference
- Next.js Env Vars: https://nextjs.org/docs/basic-features/environment-variables
- FastAPI Env: https://fastapi.tiangolo.com/advanced/settings/
- Railway Deployment: https://docs.railway.app/
- Vercel Deployment: https://vercel.com/docs/concepts/projects/environment-variables
